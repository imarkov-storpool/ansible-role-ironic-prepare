- name: Generating management interface network configuration file
  become: yes
  ansible.builtin.template:
    dest: "/etc/sysconfig/network-scripts/ifcfg-{{ management_interface_name }}"
    src: management-interface.j2

- name: Installing GRUB EFI package
  become: yes
  ansible.builtin.yum:
    name:
      - grub2-efi
      - shim
  notify: Update GRUB configuration

- name: Removing explicit console arguments from kernel command line
  become: yes
  ansible.builtin.lineinfile:
    path: /etc/default/grub
    search_string: GRUB_CMDLINE_LINUX=
    line: GRUB_CMDLINE_LINUX="crashkernel=auto network-config=disabled"
  notify: Update GRUB configuration
